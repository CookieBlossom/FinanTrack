<div class="container-categories">
  <!-- Header con información del plan -->
  <div class="categories-header">
    <h2>Gestión de Categorías</h2>
    <div class="plan-info">
      <div class="keywords-limit-info">
        <mat-icon>label</mat-icon>
        <span>Límite: {{ keywordsLimit }} keywords por categoría</span>
        <span class="usage-info">(Plan {{ currentPlanName }})</span>
      </div>
      <button 
        mat-raised-button 
        color="primary" 
        (click)="upgradePlan()"
        *ngIf="currentPlanName === 'free'">
        <mat-icon>upgrade</mat-icon>
        Actualizar Plan
      </button>
    </div>
  </div>

  <!-- Notificación de límites -->
  <div class="notifications-container" *ngIf="showLimitNotification">
    <app-limit-notification 
      [data]="limitNotificationData"
      (onClose)="hideLimitNotification()">
    </app-limit-notification>
  </div>

  <div class="left-panel">
    <div class="table-section">
      <ag-grid-angular
        style="width: 100%; height: 500px;"
        [rowData]="categories"
        [columnDefs]="columnDefs"
        [defaultColDef]="defaultColDef"
        [theme]="myTheme"
        (gridReady)="onGridReady($event)"
        (gridSizeChanged)="onGridSizeChanged($event)"
        (cellValueChanged)="onCellValueChanged($event)"
        (cellClicked)="onCellClicked($event)"
        [animateRows]="true"
        [enableCellTextSelection]="true"
        [ensureDomOrder]="true"
        [context]="gridContext"
        [rowHeight]="100"
        [rowSelection]="'single'"
        [pagination]="true"
        [paginationPageSize]="paginationPageSize"
        [paginationPageSizeSelector]="paginationPageSizeSelector">
      </ag-grid-angular>    
    </div>
  </div>

  <div class="right-panel">
    <div class="chart-section">
      <ngx-charts-pie-grid
        [view]="chartView"
        [results]="gastoTarjeta"
        [scheme]="'cool'"
        [animations]="true"
        [tooltipText]="formatTooltip">
      </ngx-charts-pie-grid>
    </div>
    <div class="chart-section">
      <ngx-charts-pie-grid
        [view]="chartView"
        [results]="gastoEfectivo"
        [scheme]="'vivid'"
        [animations]="true"
        [tooltipText]="formatTooltip">
      </ngx-charts-pie-grid>
    </div>
  </div>
</div>