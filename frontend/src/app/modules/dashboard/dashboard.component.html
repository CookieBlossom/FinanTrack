<div class="container-dashboard">
    <div class="dashboard-content" *ngIf="!loading; else loadingTemplate">
        <!-- Situación Financiera -->
        <div class="financial-summary">
            <h2>Situación Financiera</h2>
            <div class="summary-content" *ngIf="financialSummary; else noData">
                <div class="total-balance" [ngClass]="getBalanceColor()">
                    <span>Balance Total</span>
                    <span>{{ formatAmount(financialSummary.totalBalance) }}</span>
                </div>
                <div class="cards-info">
                    <span>Total Tarjetas: {{ financialSummary.totalCards }}</span>
                    <span>Tarjetas Activas: {{ financialSummary.activeCards }}</span>
                </div>
            </div>
        </div>

        <!-- Top 5 Gastos -->
        <div class="top-expenses">
            <h2>Top 5 Gastos</h2>
            <div class="expenses-list" *ngIf="topExpenses.length > 0; else noData">
                <div class="expense-item" *ngFor="let expense of topExpenses">
                    <div class="expense-info">
                        <span>{{ expense.description }}</span>
                        <span>{{ expense.category }} - {{ formatDate(expense.transactionDate) }}</span>
                    </div>
                    <div class="expense-amount">
                        {{ formatAmount(expense.amount) }}
                    </div>
                </div>
            </div>
        </div>

        <!-- Gastos por Categoría -->
        <div class="expenses-by-category">
            <h2>Gastos por Categoría</h2>
            <div class="category-list" *ngIf="expensesByCategory.length > 0; else noData">
                <div class="category-item" *ngFor="let category of expensesByCategory">
                    <div class="category-info">
                        <span>{{ category.category }}</span>
                        <span>{{ category.percentage }}%</span>
                    </div>
                    <div class="category-amount">
                        {{ formatAmount(category.total) }}
                    </div>
                </div>
            </div>
        </div>

        <!-- Movimientos Proyectados -->
        <div class="projected-movements">
            <h2>Próximos Movimientos</h2>
            <div class="movements-list" *ngIf="projectedMovements.length > 0; else noData">
                <div class="movement-item" *ngFor="let movement of projectedMovements">
                    <div class="movement-info">
                        <span>{{ movement.description }}</span>
                        <span>{{ movement.category }} - {{ formatDate(movement.transactionDate) }}</span>
                    </div>
                    <div class="movement-amount">
                        {{ formatAmount(movement.amount) }}
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<ng-template #loadingTemplate>
    <div class="loading">
        <span>Cargando datos...</span>
    </div>
</ng-template>

<ng-template #noData>
    <div class="no-data">
        <span>No hay datos disponibles</span>
    </div>
</ng-template>