<!-- Overlay para móviles -->
<div class="sidebar-overlay" 
     [class.visible]="isMobile && !isCollapsed && !isTopNav" 
     (click)="toggleSidebar()">
</div>

<div class="sidebar-container" [class.mobile]="isMobile" [class.collapsed]="isCollapsed" [class.top-nav]="isTopNav">
  
  <!-- Header/Brand solo en desktop -->
  <div class="sidebar-header" [class.collapsed]="isCollapsed" *ngIf="!isTopNav">
    <div class="brand-container">
      <mat-icon class="brand-icon">account_balance_wallet</mat-icon>
      <span class="brand-name" *ngIf="!isCollapsed">FinanTrack</span>
    </div>
    <button 
      *ngIf="isMobile && !isTopNav" 
      class="toggle-btn" 
      (click)="toggleSidebar()"
      mat-icon-button>
      <mat-icon>{{ isCollapsed ? 'menu' : 'close' }}</mat-icon>
    </button>
  </div>

  <!-- Navigation Menu SIEMPRE visible -->
  <nav class="sidebar-nav" [class.collapsed]="isCollapsed">
    <div class="menu-section">
      <a class="nav-item" 
         routerLink="/dashboard" 
         routerLinkActive="active"
         [matTooltip]="isCollapsed && !isTopNav ? 'Panel de Control' : ''"
         [matTooltipPosition]="'right'">
        <mat-icon>dashboard</mat-icon>
        <span *ngIf="!isCollapsed && !isTopNav">Panel de Control</span>
      </a>
      <a class="nav-item" 
         routerLink="/cards" 
         routerLinkActive="active"
         [matTooltip]="isCollapsed && !isTopNav ? 'Tarjetas' : ''"
         [matTooltipPosition]="'right'">
        <mat-icon>credit_card</mat-icon>
        <span *ngIf="!isCollapsed && !isTopNav">Tarjetas</span>
      </a>
      <a class="nav-item" 
         routerLink="/movements" 
         routerLinkActive="active"
         [matTooltip]="isCollapsed && !isTopNav ? 'Historial de Movimientos' : ''"
         [matTooltipPosition]="'right'">
        <mat-icon>receipt_long</mat-icon>
        <span *ngIf="!isCollapsed && !isTopNav">Historial de Movimientos</span>
      </a>
      <a class="nav-item" 
         routerLink="/analytics" 
         routerLinkActive="active"
         [matTooltip]="isCollapsed && !isTopNav ? 'Análisis y Proyección' : ''"
         [matTooltipPosition]="'right'">
        <mat-icon>analytics</mat-icon>
        <span *ngIf="!isCollapsed && !isTopNav">Análisis y Proyección</span>
      </a>
      <a class="nav-item" 
         routerLink="/categories" 
         routerLinkActive="active"
         [matTooltip]="isCollapsed && !isTopNav ? 'Categorización' : ''"
         [matTooltipPosition]="'right'">
        <mat-icon>category</mat-icon>
        <span *ngIf="!isCollapsed && !isTopNav">Categorización</span>
      </a>
      <a class="nav-item" 
         routerLink="/upcoming-transactions" 
         routerLinkActive="active"
         [matTooltip]="isCollapsed && !isTopNav ? 'Próximos Movimientos' : ''"
         [matTooltipPosition]="'right'">
        <mat-icon>schedule</mat-icon>
        <span *ngIf="!isCollapsed && !isTopNav">Próximos Movimientos</span>
      </a>
    </div>
  </nav>

  <!-- Footer solo en desktop -->
  <div class="sidebar-footer" [class.collapsed]="isCollapsed" *ngIf="!isTopNav">
    <a class="nav-item footer-item" 
       routerLink="/about-company"
       [matTooltip]="isCollapsed ? 'Acerca de la empresa' : ''"
       [matTooltipPosition]="'right'">
      <mat-icon>info</mat-icon>
      <span *ngIf="!isCollapsed">Acerca de la empresa</span>
    </a>
    <a class="nav-item footer-item" 
       routerLink="/home"
       [matTooltip]="isCollapsed ? 'Cerrar sesión' : ''"
       [matTooltipPosition]="'right'">
      <mat-icon>logout</mat-icon>
      <span *ngIf="!isCollapsed">Cerrar sesión</span>
    </a>
  </div>
</div>
